<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>

    <meta name="author" content="Dardan Rrafshi"/>
    <meta name="description" content="Erstellen Sie sich Ihren eigenen Becher und holen Sie sich die FroYo Experience nach Hause!"/>
    <meta name="keywords" content="Frozen Yogurt, FroYo, Joghurt, Eiskrem, Speiseeis, Softeis, Dessert, Mixen, Toppings"/>

    <title>Yummy Yogurt - Profil</title>

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css"
        integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../vendor/bootstrap/bootstrap.min.css"/>

    <!-- Own CSS Styles -->
    <link rel="stylesheet" href="../css/master.css"/>

    <!-- AngularJS Core -->
    <script src="../vendor/angular/angular-1.7.5.min.js"></script>
</head>

<body  ng-app="profile-app" ng-controller="profile-controller">
    <!-- Main Header -->
    <header class="sticky-top bg-light">
        <!-- Main Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light font-harman-simple">
            <div class="container">
                <a class="navbar-brand" href="../index.html">
                    <img src="../images/yummy-yogurt-logo-4.png" height="50" alt="Yummy Yogurt"/>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar"
                        aria-controls="main-navbar" aria-expand="false" aria-label="Navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="main-navbar">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item ">
                            <a class="nav-link" href="../about.html">
                                <span class="fas fa-user-friends"></span> Über uns
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../contact.html">
                                <span class="fas fa-address-card"></span> Kontakt
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="mixer.html">
                                <span class="fas fa-blender"></span> Mixer
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../discover.html">
                                <span class="fas fa-search"></span> Entdecken
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="shopping-cart.html">
                                <span class="fas fa-shopping-cart"></span> Warenkorb
                            </a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="profile-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="fas fa-user-circle"></span> {{user.username}}
                            </a>
                            <div class="dropdown-menu" aria-labelledby="profile-dropdown">
                            	<a class="dropdown-item" href="profile.html">Profil</a>
                            	<a class="dropdown-item" href="profile-setting.html">Profileinstellungen</a>
                            	<div class="dropdown-divider"></div>
                            	<a class="dropdown-item" href="logout">Abmelden</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container">
        <h1 class="mt-4 mb-3">Profil</h1>

        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="../index.html">Home</a></li>
            <li class="breadcrumb-item">Profil</li>
        </ol>

        <section class="row">
            <div class="col-lg-6 mb-3">
                <img class="img-fluid img-thumbnail" src="http://placehold.it/360x360" alt="Profilbild"/>
            </div>

            <div class="col-lg-6 mb-3">
                <h2>{{user.username}}</h2>
                <p class="text-muted font-harman-simple lead">{{user.firstname}} {{user.familyname}}</p>

                <hr class="seperator"/>

                <h4>E-Mail</h4>
                <p class="font-harman-simple">{{user.email}}</p>

                <h4>Geburtsdatum</h4>
                <p class="font-harman-simple">{{user.birthday.month}} {{user.birthday.dayOfMonth}}, {{user.birthday.year}}</p>

                <h4>Mitglied seit</h4>
                <p class="font-harman-simple">{{user.accessiondate.month}} {{user.accessiondate.dayOfMonth}}, {{user.accessiondate.year}}</p>
            </div>
        </section>

        <!-- hr class="seperator"/>
        <h2 class="mt-4 mb-3 text-center">Zuletzt bestellt</h2>
        <hr class="seperator"/>

        <section class="row">
            <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                <div class="card h-100 bg-light">
                    <a href="../product-info.html"><img class="img-fluid" src="../images/yogurts/yogurt-08.jpg" alt="Banana Awesome"/></a>
                    <div class="card-body">
                        <h5 class="card-title"><a href="../product-info.html">Banana Awesome</a></h5>
                        <h6 class="card-subtitle mb-3 text-muted">by DonColon</h6>
                        <p class="card-text">Bananen-Joghurt, Banane, Schokobomben, Schokostreusel</p>
                        <p class="card-text"><strong>Preis: 3,50€</strong></p>
                    </div>
                    <div class="card-footer text-center">
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                <div class="card h-100 bg-light">
                    <a href="../product-info.html"><img class="img-fluid" src="../images/yogurts/yogurt-02.jpg" alt="Nuts Royal"/></a>
                    <div class="card-body">
                        <h5 class="card-title"><a href="../product-info.html">Nuts Royal</a></h5>
                        <h6 class="card-subtitle mb-3 text-muted">by DonColon</h6>
                        <p class="card-text">Nuccio-Joghurt, Walnüsse, Haselnuss, Nougatsoße</p>
                        <p class="card-text"><strong>Preis: 3,50€</strong></p>
                    </div>
                    <div class="card-footer text-center">
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                <div class="card h-100 bg-light">
                    <a href="../product-info.html"><img class="img-fluid" src="../images/yogurts/yogurt-09.jpg" alt="Fruity Loop"/></a>
                    <div class="card-body">
                        <h5 class="card-title"><a href="../product-info.html">Fruity Loop</a></h5>
                        <h6 class="card-subtitle mb-3 text-muted">by Krdnz57</h6>
                        <p class="card-text">Apfel-Joghurt, Birne, Ananas, Banane, Erdbeere</p>
                        <p class="card-text"><strong>Preis: 3,50€</strong></p>
                    </div>
                    <div class="card-footer text-center">
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="far fa-star"></span>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                <div class="card h-100 bg-light">
                    <a href="../product-info.html"><img class="img-fluid" src="../images/yogurts/yogurt-04.jpg" alt="Sugar Bombs"/></a>
                    <div class="card-body">
                        <h5 class="card-title"><a href="../product-info.html">Sugar Bombs</a></h5>
                        <h6 class="card-subtitle mb-3 text-muted">by RichardDieRakete</h6>
                        <p class="card-text">Schoko-Joghurt, Karamell, Nougatsoße, Schokostreusel</p>
                        <p class="card-text"><strong>Preis: 3,50€</strong></p>
                    </div>
                    <div class="card-footer text-center">
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="fas fa-star"></span>
                        <span class="far fa-star"></span>
                        <span class="far fa-star"></span>
                    </div>
                </div>
            </div>
        </section-->

        <hr class="seperator"/>
        <h2 class="mt-4 mb-3 text-center">Meine Kreationen</h2>
        <hr class="seperator"/>

        <section class="row">
            <div class="col-lg-3 col-md-4 col-sm-6 mb-3" ng-repeat="yogurt in yogurts">
                <div class="card h-100 bg-light">
                    <a href="../product-info.html?id={{yogurt.id}}"><img class="img-fluid" src="../images/yogurts/yogurt-07.jpg" alt="{{yogurt.name}}"/></a>
                    <div class="card-body">
                        <h5 class="card-title"><a href="../product-info.html?id={{yogurt.id}}">{{yogurt.name}}</a></h5>
                        <h6 class="card-subtitle mb-3 text-muted">by {{yogurt.owner.username}}</h6>
                        <p class="card-text">
							<span ng-repeat="ingredient in yogurt.recipe">{{ingredient.name}}, </span>
						</p>
                        <p class="card-text"><strong>Preis: {{convertToEuro(yogurt.priceInCents)}} €</strong></p>
                         <span class="badge badge-danger font-harman-simple p-2">Früchte</span>
                    </div>
                    <div class="card-footer text-center" ng-init="setAverageRating(yogurt.ratings);">
						<span id="star0"></span>
                        <span id="star1"></span>
                        <span id="star2"></span>
                        <span id="star3"></span>
                        <span id="star4"></span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Main Footer -->
    <footer class="main-footer py-3 bg-secondary text-center font-harman-simple">
        <div class="container">
            <div class="my-3">
                <a target="_blank" href="https://de.linkedin.com/">
                    <span class="mr-3 social-media-icon  fab fa-linkedin"></span>
                </a>
                <a target="_blank" href="https://twitter.com/?lang=de">
                    <span class="mr-3 social-media-icon fab fa-twitter-square"></span>
                </a>
                <a target="_blank" href="https://www.facebook.com/">
                    <span class="mr-3 social-media-icon fab fa-facebook-square"></span>
                </a>
                <a target="_blank" href="https://www.instagram.com/">
                    <span class="mr-3 social-media-icon fab fa-instagram"></span>
                </a>
                <a target="_blank" href="https://www.youtube.com/">
                    <span class="mr-3 social-media-icon fab fa-youtube-square"></span>
                </a>
            </div>
            <p class="my-3 text-white">
                <small>Copyright &copy; Yummy Yogurt 2018</small>
            </p>
            <div class="my-3">
                <a class="mr-2 text-white" href="../contact.html">Kontakt</a>
                <a class="mr-2 text-white" href="../impressum.html">Impressum</a>
                <a class="mr-2 text-white" href="../about.html">Über uns</a>
            </div>
        </div>
    </footer>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/jquery/jquery-3.3.1.min.js"></script>
    <script src="../vendor/bootstrap/bootstrap.min.js"></script>

    <script type="text/javascript">
        var app = angular.module('profile-app', []);
        app.controller('profile-controller', function($scope, $http) {
            $http.get('http://localhost:8080/yummy-webapp/services/users')
	            .then(function(response) {
	                $scope.user = response.data;
	            }
            );
            
            $http.get('http://localhost:8080/yummy-webapp/services/yogurts/')
            	.then(function(response) {
					$scope.yogurts = response.data;
				}
            );
            
            $scope.convertToEuro = function(priceInCents) {
				var priceInEuro = priceInCents / 100;
				return priceInEuro.toFixed(2);
			}
        });
        
        function setAverageRating(ratings) {
        	console.log('Hallo');
        	var average = 0;
        	for(value in ratings) {
        		average += value.rating;
        	}
        	average /= ratings.length;
        	
        	for(var i = 0; i < average; i++) {
        		
        		var star = angular.element('#star' + i);
        		star.addClass('fas fa-star');
        	}
        }
    </script>
</body>

</html>
